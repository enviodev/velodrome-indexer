# yaml-language-server: $schema=./node_modules/envio/evm.schema.json
name: Velodrome_v2
description: Multi-chain indexer for Velodrome V2 on Optimism and Aerodrome on Base
unordered_multichain_mode: true
rollback_on_reorg: false
event_decoder: hypersync-client
field_selection:
  transaction_fields:
    - "hash"
contracts:
  - name: SuperchainPoolFactory
    handler: src/EventHandlers/SuperchainPoolFactory.ts
    events:
      - event: RootPoolCreated(address indexed token0, address indexed token1, bool indexed stable, address pool, uint256 length)
  - name: SuperchainCLFactory
    handler: src/EventHandlers/SuperchainCLFactory.ts
    events:
      - event: RootPoolCreated(address indexed token0, address indexed token1, int24 indexed tickSpacing, uint256 chainid, address pool)
  - name: PoolFactory
    handler: src/EventHandlers/PoolFactory.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, bool indexed stable, address pool, uint256 unnamed)
      - event: SetCustomFee(address indexed pool, uint256 fee)
  - name: CLFactory
    handler: src/EventHandlers/CLFactory.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, int24 indexed tickSpacing, address pool)
  - name: CLPool
    handler: src/EventHandlers/CLPool.ts
    events:
      - event: Burn(address indexed owner, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount, uint256 amount0, uint256 amount1)
      - event: Collect(address indexed owner, address recipient, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount0, uint128 amount1)
      - event: CollectFees(address indexed recipient, uint128 amount0, uint128 amount1)
      - event: Flash(address indexed sender, address indexed recipient, uint256 amount0, uint256 amount1, uint256 paid0, uint256 paid1)
      - event: IncreaseObservationCardinalityNext(uint16 observationCardinalityNextOld, uint16 observationCardinalityNextNew)
      - event: Initialize(uint160 sqrtPriceX96, int24 tick)
      - event: Mint(address sender, address indexed owner, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount, uint256 amount0, uint256 amount1)
      - event: SetFeeProtocol(uint8 feeProtocol0Old, uint8 feeProtocol1Old, uint8 feeProtocol0New, uint8 feeProtocol1New)
      - event: Swap(address indexed sender, address indexed recipient, int256 amount0, int256 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick)
  - name: NFPM
    handler: src/EventHandlers/NFPM.ts
    events:
      - event: Transfer(address indexed from, address indexed to, uint256 indexed tokenId)
  - name: Pool
    handler: src/EventHandlers/Pool.ts
    events:
      - event: Mint(address indexed sender, uint256 amount0, uint256 amount1)
      - event: Burn(address indexed sender, address indexed to, uint256 amount0, uint256 amount1)
      - event: Fees(address indexed sender, uint256 amount0, uint256 amount1)
      - event: Swap(address indexed sender, address indexed to, uint256 amount0In, uint256 amount1In, uint256 amount0Out, uint256 amount1Out)
      - event: Sync(uint256 reserve0, uint256 reserve1)
  - name: Voter
    handler: src/EventHandlers/Voter/Voter.ts
    events:
      - event: Voted(address indexed sender, address indexed pool, uint256 indexed tokenId, uint256 weight, uint256 totalWeight, uint256 timestamp)
      - event: DistributeReward(address indexed sender, address indexed gauge, uint256 amount)
      - event: GaugeCreated(address indexed poolFactory, address indexed votingRewardsFactory, address indexed gaugeFactory, address pool, address bribeVotingReward, address feeVotingReward, address gauge, address creator)
      - event: WhitelistToken(address indexed whitelister, address indexed token, bool indexed _bool)
  - name: SuperchainLeafVoter 
    handler: src/EventHandlers/Voter/SuperchainLeafVoter.ts
    events:
      - event: Voted(address indexed sender, address indexed pool, uint256 indexed tokenId, uint256 weight, uint256 totalWeight, uint256 timestamp)
      - event: DistributeReward(address indexed sender, address indexed gauge, uint256 amount)
      - event: GaugeCreated(address indexed poolFactory, address indexed votingRewardsFactory, address indexed gaugeFactory, address pool, address incentiveVotingReward, address feeVotingReward, address gauge)
      - event: WhitelistToken(address indexed whitelister, address indexed token, bool indexed _bool)
  - name: VotingReward
    handler: src/EventHandlers/VotingReward.ts
    events:
      - event: Deposit(address indexed from, uint256 indexed tokenId, uint256 amount)
      - event: NotifyReward(address indexed from, address indexed reward, uint256 indexed epoch, uint256 amount)
      - event: Withdraw(address indexed from, uint256 indexed tokenId, uint256 amount)
  - name: Gauge
    handler: src/EventHandlers/Gauge.ts
    events:
      - event: NotifyReward(address indexed from, uint256 amount)
networks:
  - id: 34443 # Mode
    start_block: 0
    contracts:
      - name: NFPM
        address:
          - 0xB258df2cf2EAd9254Ca31FFa51F456174Ea7a832
      - name: PoolFactory
        address:
          - 0x31832f2a97Fd20664D76Cc421207669b55CE4BC0
      - name: CLFactory
        address:
          - 0x04625B046C69577EfC40e6c0Bb83CDBAfab5a55F
      - name: Pool
        address:
      - name: SuperchainLeafVoter
        address:
          - 0x97cDBCe21B6fd0585d29E539B1B99dAd328a1123
      - name: VotingReward
        address:
      - name: CLPool
        address:
  - id: 1135 # Lisk
    start_block: 0
    contracts:
      - name: NFPM
        address:
          - 0x991d5546C4B442B4c5fdc4c8B8b8d131DEB24702
      - name: PoolFactory
        address:
          - 0x31832f2a97Fd20664D76Cc421207669b55CE4BC0
      - name: CLFactory
        address:
          - 0x04625B046C69577EfC40e6c0Bb83CDBAfab5a55F
      - name: Pool
        address:
      - name: SuperchainLeafVoter
        address:
          - 0x97cDBCe21B6fd0585d29E539B1B99dAd328a1123
      - name: VotingReward
        address:
      - name: CLPool
        address:
